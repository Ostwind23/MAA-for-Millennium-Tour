{
    "Task_Division": {
        "doc": "神谕司任务链",
        "next": [
            "[JumpBack]openDivision",
            "[JumpBack]openDivisionAppointment",
            "[JumpBack]Task_DivisionHotSpring",
            "[JumpBack]Task_DivisionFarming",
            "[JumpBack]ClosePage",
            "[JumpBack]Sub_Getreward",
            "Homeflag3"
        ]
    },
    "openDivision": {
        "recognition": "TemplateMatch",
        "template": "daily/division.png",
        "roi": [
            718,
            559,
            243,
            161
        ],
        "action": "Click",
        "target_offset": [
            -20,
            0,
            0,
            0
        ],
        "post_delay": 1000,
        "next": [
            "[JumpBack]openDivisionAppointment",
            "[JumpBack]Task_DivisionHotSpring",
            "[JumpBack]Task_DivisionFarming",
            "[JumpBack]ClosePage",
            "[JumpBack]Sub_Getreward",
            "Homeflag3"
        ]
    },
    "ifDivisionNotneedaction": {
        "recognition": "TemplateMatch",
        "template": "Alert.png",
        "inverse": true,
        "roi": [
            0,
            32,
            284,
            162
        ],
        "next": [
            "Homeflag3"
        ]
    },
    "openDivisionAppointment": {
        "recognition": "TemplateMatch",
        "template": "Alert.png",
        "roi": [
            1,
            223,
            132,
            86
        ],
        "action": "Click",
        "post_delay": 1000,
        "next": [
            "getDivisionAppointment"
        ]
    },
    "getDivisionAppointment": {
        "recognition": "OCR",
        "expected": "领取",
        "roi": [
            813,
            578,
            201,
            125
        ],
        "action": "Click",
        "post_delay": 1000,
        "next": [
            "[JumpBack]Sub_Getreward",
            "Division_backtolist"
        ]
    },
    "Division_backtolist": {
        "recognition": "TemplateMatch",
        "template": "back.png",
        "roi": [
            0,
            0,
            215,
            140
        ],
        "action": "Click",
        "next": [
            "Division_Judginglist"
        ]
    },
    "Division_Judginglist": {
        "next": [
            "[JumpBack]Task_DivisionHotSpring",
            "[JumpBack]Task_DivisionFarming",
            "Homeflag3"
        ]
    },
    "Task_DivisionHotSpring": {
        "doc": "神谕司任务链-温泉奖励领取",
        "recognition": "TemplateMatch",
        "template": "Alert.png",
        "roi": [
            19,
            551,
            69,
            79
        ],
        "action": "Click",
        "target_offset": [
            -5,
            10,
            0,
            0
        ],
        "next": [
            "[JumpBack]Spring_of_MITIA",
            "[JumpBack]Spring_of_Misty",
            "Return_Divisionlist"
        ]
    },
    "Spring_of_MITIA": {
        "recognition": "TemplateMatch",
        "template": "Alert.png",
        "roi": [
            1134,
            132,
            121,
            109
        ],
        "action": "Click",
        "post_delay": 3000,
        "next": [
            "[JumpBack]Hotspring_Getreward",
            "Subreturn_back"
        ]
    },
    "Spring_of_Misty": {
        "recognition": "TemplateMatch",
        "template": "Alert.png",
        "roi": [
            1146,
            245,
            93,
            88
        ],
        "action": "Click",
        "post_delay": 3000,
        "next": [
            "[JumpBack]Hotspring_Getreward",
            "Subreturn_back"
        ]
    },
    "Hotspring_Getreward": {
        "recognition": "TemplateMatch",
        "template": "Alert.png",
        "roi": [
            180,
            490,
            208,
            157
        ],
        "action": "Click",
        "post_wait_freezes": 500,
        "next": [
            "Return_Hotspringlist"
        ]
    },
    "Return_Hotspringlist": {
        "recognition": "TemplateMatch",
        "template": "back.png",
        "roi": [
            0,
            0,
            215,
            140
        ],
        "action": "Click"
    },
    "Return_Divisionlist": {
        "recognition": "TemplateMatch",
        "template": "back.png",
        "roi": [
            0,
            0,
            215,
            140
        ],
        "action": "Click"
    },
    "Task_DivisionFarming": {
        "doc": "神谕司任务链-农场任务",
        "recognition": "TemplateMatch",
        "template": "Alert.png",
        "roi": [
            14,
            307,
            83,
            84
        ],
        "pre_wait_freezes": 2000,
        "action": "Click",
        "next": [
            "[JumpBack]Sub_Getreward",
            "EnterFarm"
        ]
    },
    "EnterFarm": {
        "doc": "",
        "recognition": "OCR",
        "expected": "建设",
        "roi": [
            567,
            640,
            191,
            76
        ],
        "next": [
            "[JumpBack]Sub_Getreward",
            "[JumpBack]Farm_Enter_Harvest",
            "[JumpBack]returnHome"
        ]
    },
    "Farm_Emergency_Entry": {
        "doc": "农场故障事件检测，角色罢工会影响正常收取农作物，因此要优先处理",
        "next": [
            "Farm_Emergency_Annoying",
            "Farm_Emergency_Waterwheel",
            "Farm_Emergency_Windmill",
            "Farm_Emergency_Worms"
        ]
    },
    "Farm_Emergency_Annoying": {
        "recognition": "TemplateMatch",
        "template": "farm/罢工.png",
        "roi": [
            1064,
            99,
            215,
            147
        ],
        "action": "Click",
        "target": [
            622,
            229,
            6,
            5
        ],
        "post_delay": 1000,
        "next": [
            "[JumpBack]Sub_Getreward",
            "Subreturn_back"
        ]
    },
    "Farm_Emergency_Waterwheel": {
        "doc": "农场水车损坏事件 - 使用 YOLOv8 检测角色位置，操控移动到水车附近修理",
        "recognition": "TemplateMatch",
        "template": "farm/水车损坏.png",
        "roi": [
            1103,
            160,
            172,
            93
        ],
        "action": "Custom",
        "custom_action": "FarmWaterwheelRepair",
        "custom_action_param": {
            "event_type": "waterwheel"
        },
        "post_delay": 1000,
        "next": [
            "[JumpBack]Sub_Getreward",
            "Subreturn_back"
        ]
    },
    "Farm_Emergency_Windmill": {
        "doc": "农场风车故障事件 - 使用 YOLOv8 检测角色位置，操控移动到风车附近修理",
        "recognition": "TemplateMatch",
        "template": "farm/风车故障.png",
        "roi": [
            1103,
            160,
            172,
            93
        ],
        "action": "Custom",
        "custom_action": "FarmWindmillRepair",
        "custom_action_param": {
            "event_type": "windmill"
        },
        "post_delay": 1000,
        "next": [
            "[JumpBack]Sub_Getreward",
            "Subreturn_back"
        ]
    },
    "Farm_Emergency_Worms": {
        "doc": "农场捉虫事件 - 使用 YOLOv8 检测虫子和角色位置，操控移动捕捉（待实现）",
        "recognition": "TemplateMatch",
        "template": "farm/捉虫标志.png",
        "action": "Custom",
        "custom_action": "FarmWormCatching",
        "next": [
            "[JumpBack]Sub_Getreward",
            "Subreturn_back"
        ]
    },
    "Farm_Enter_Harvest": {
        "action": "Click",
        "target": [
            490,
            346,
            1,
            3
        ],
        "post_delay": 1000,
        "next": [
            "[JumpBack]Farm_HarvestAll",
            "[JumpBack]Farm_Plant",
            "Farm_Enter_Harvest_Backup",
            "Subreturn_back"
        ]
    },
    "Farm_Enter_Harvest_Backup": {
        "action": "Click",
        "target": [
            757,
            407,
            1,
            0
        ],
        "next": [
            "[JumpBack]Farm_HarvestAll",
            "[JumpBack]Farm_Plant",
            "Subreturn_back"
        ]
    },
    "Farm_HarvestAll": {
        "recognition": "OCR",
        "expected": "全部收获",
        "roi": [
            759,
            450,
            520,
            269
        ],
        "action": "Click",
        "post_wait_freezes": 1000,
        "next": [
            "[JumpBack]Sub_Getreward",
            "[JumpBack]NothingtoHarvest",
            "Subreturn_back"
        ]
    },
    "NothingtoHarvest": {
        "recognition": "ColorMatch",
        "roi": [
            983,
            604,
            188,
            40
        ],
        "lower": [
            73,
            73,
            73
        ],
        "upper": [
            100,
            100,
            100
        ],
        "count": 30,
        "next": [
            "[JumpBack]Sub_Getreward",
            "CanFertilize",
            "[JumpBack]ClosePage",
            "[JumpBack]CheckWhetherWatered",
            "Homeflag3"
        ]
    },
    "Farm_Plant": {
        "recognition": "TemplateMatch",
        "template": "farm/种植按钮.png",
        "roi": [
            639,
            528,
            291,
            144
        ],
        "action": "Click",
        "next": [
            "Farm_SelectCrop"
        ]
    },
    "Farm_SelectCrop": {
        "doc": "默认按模板识别，可在界面选择按数量 OCR 匹配",
        "recognition": "FeatureMatch",
        "template": "seed/龙鳞果.png",
        "roi": [
            373,
            135,
            832,
            479
        ],
        "action": "Click",
        "post_delay": 1000,
        "focus": {
            "Node.Recognition.Failed": "[color:red]没有检测到可用的作物种子[/color]"
        },
        "next": [
            "Farm_ConfirmPlant"
        ]
    },
    "Farm_ConfirmPlant": {
        "doc": "点了种植之后是直接可以施肥",
        "recognition": "OCR",
        "expected": "^(1[6-9]|[2-9]\\d|\\d{3})/16$",
        "roi": [
            863,
            593,
            96,
            69
        ],
        "focus": {
            "Node.Recognition.Failed": "[color:red]选择的作物种子数量不满16，请重新选择[/color]"
        },
        "action": "Click",
        "next": [
            "Farm_Fertilize"
        ]
    },
    "CanFertilize": {
        "recognition": "ColorMatch",
        "lower": [
            0,
            97,
            95
        ],
        "upper": [
            14,
            117,
            115
        ],
        "roi": [
            405,
            604,
            186,
            42
        ],
        "count": 30,
        "next": [
            "Farm_Fertilize",
            "[JumpBack]ClosePage",
            "Homeflag3"
        ]
    },
    "Farm_Fertilize": {
        "recognition": "TemplateMatch",
        "template": "farm/施肥.png",
        "roi": [
            355,
            555,
            284,
            141
        ],
        "action": "Click",
        "post_delay": 1000,
        "next": [
            "Farm_ChooseFertilizer"
        ]
    },
    "Farm_ChooseFertilizer": {
        "doc": "速生型肥料colormatch upper[152, 179, 97], lower[132, 159, 77] 丰收型肥料upper[218, 182, 52], lower[199, 166, 31] 幸运型肥料upper[237, 140, 53], lower[217, 120, 33]",
        "recognition": "ColorMatch",
        "upper": [
            218,
            182,
            52
        ],
        "lower": [
            199,
            166,
            31
        ],
        "roi": [
            373,
            135,
            832,
            479
        ],
        "action": "Click",
        "post_delay": 1000,
        "focus": {
            "Node.Recognition.Failed": "[color:red]没有检测到可用的肥料[/color]"
        },
        "next": [
            "Farm_ConfirmFertilize"
        ]
    },
    "Farm_ConfirmFertilize": {
        "recognition": "OCR",
        "expected": "^(1[6-9]|[2-9]\\d|\\d{3})/16$",
        "roi": [
            863,
            593,
            96,
            69
        ],
        "focus": {
            "Node.Recognition.Failed": "[color:red]选择的肥料数量不满16，请重新选择[/color]"
        },
        "action": "Click",
        "post_delay": 2000,
        "next": [
            "[JumpBack]ClosePage",
            "[JumpBack]CheckWhetherWatered",
            "[JumpBack]BackToHome"
        ]
    },
    "CheckWhetherWatered": {
        "doc": "检查是否都浇过水：若存在干涸标志或明显干土颜色块则进入全场浇水，否则跳过",
        "recognition": "Or",
        "any_of": [
            {
                "recognition": "TemplateMatch",
                "template": "farm/干涸标志.png",
                "roi": [
                    248,
                    196,
                    789,
                    451
                ]
            },
            {
                "recognition": "ColorMatch",
                "upper": [
                    170,
                    127,
                    101
                ],
                "lower": [
                    160,
                    117,
                    91
                ],
                "roi": [
                    248,
                    196,
                    789,
                    451
                ],
                "count": 40
            }
        ],
        "next": [
            "Farm_Watering",
            "[JumpBack]Sub_Getreward",
            "Subreturn_back"
        ]
    },
    "Farm_Watering": {
        "action": "Custom",
        "custom_action": "FarmWateringAll",
        "custom_action_param": {
            "event_type": "watering"
        },
        "next": [
            "[JumpBack]Sub_Getreward",
            "Subreturn_back"
        ]
    },
    "Division_back": {
        "recognition": "TemplateMatch",
        "template": "back.png",
        "roi": [
            0,
            0,
            215,
            140
        ],
        "action": "Click",
        "post_delay": 2000
    },
    "Homeflag3": {
        "doc": "神谕司任务结束，返回主界面",
        "recognition": "TemplateMatch",
        "template": "home.png",
        "roi": [
            74,
            0,
            202,
            140
        ],
        "action": "Click",
        "post_delay": 2000,
        "next": [
            "[JumpBack]ClosePage",
            "[JumpBack]Sub_Getreward",
            "StopTaskChain"
        ]
    }
}