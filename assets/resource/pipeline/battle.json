{
    "Task_DailyBattle": {
        "doc": "资源关日常战斗入口。采用JumpBack混合模式：主流程通过next链式执行，入口节点包含关键场景JumpBack用于异常恢复",
        "next": [
            "[JumpBack]openBattle",
            "[JumpBack]openVault",
            "[JumpBack]openVaultinOCR",
            "[JumpBack]checkDailyBattleX2",
            "[JumpBack]DailyTemplate_NoneX2",
            "[JumpBack]chooseOwnmission",
            "[JumpBack]chooseOwnmission_下三",
            "[JumpBack]突破材料_findclass",
            "[JumpBack]突破材料_findclass_滑动后",
            "[JumpBack]符文之地_findclass",
            "[JumpBack]scanmission",
            "[JumpBack]entermission",
            "[JumpBack]maximization",
            "[JumpBack]launchbattle",
            "[JumpBack]completebattle",
            "[JumpBack]cancelforsupply",
            "[JumpBack]Sub_Getreward",
            "[JumpBack]Battle_cancelpage",
            "[JumpBack]x2_back",
            "returnHome"
        ]
    },
    "checkDailyBattleX2": {
        "doc": "[模板调度] 在宝库资源总表界面按资源类型检查当日x2并跳转到对应模板入口，由界面全局模板配置决定各类型行为",
        "recognition": "DirectHit",
        "action": "DoNothing",
        "next": [
            "findx2_BenLe",
            "findx2_Exp",
            "findx2_Break",
            "findx2_Rune",
            "findx2_SaoLing"
        ]
    },
    "DailyTemplate_NoneX2": {
        "doc": "[模板入口] 当日无x2或未启用x2时默认刷的资源关入口，由界面全局模板配置覆盖",
        "recognition": "DirectHit",
        "action": "DoNothing",
        "next": [
            "chooseOwnmission"
        ]
    },
    "DailyTemplate_BenLeX2": {
        "doc": "[模板入口] 当日x2为本勒收集时的刷本入口，由界面全局模板配置覆盖",
        "recognition": "DirectHit",
        "action": "DoNothing",
        "next": [
            "Daily_BenLe_SelectType"
        ]
    },
    "DailyTemplate_ExpX2": {
        "doc": "[模板入口] 当日x2为经验获取时的刷本入口，由界面全局模板配置覆盖",
        "recognition": "DirectHit",
        "action": "DoNothing",
        "next": [
            "Daily_Exp_SelectType"
        ]
    },
    "DailyTemplate_BreakX2": {
        "doc": "[模板入口] 当日x2为突破材料时的刷本入口，由界面全局模板配置覆盖（具体小类由“突破材料类别选择”决定）",
        "recognition": "DirectHit",
        "action": "DoNothing",
        "next": [
            "chooseOwnmission"
        ]
    },
    "DailyTemplate_RuneX2": {
        "doc": "[模板入口] 当日x2为符文之地时的刷本入口，由界面全局模板配置覆盖（具体小类由“符文之地类别选择”决定）",
        "recognition": "DirectHit",
        "action": "DoNothing",
        "next": [
            "chooseOwnmission"
        ]
    },
    "DailyTemplate_SaoLingX2": {
        "doc": "[模板入口] 当日x2为骚灵之境时的刷本入口，由界面全局模板配置覆盖",
        "recognition": "DirectHit",
        "action": "DoNothing",
        "next": [
            "Daily_SaoLing_SelectType"
        ]
    },
    "Daily_BenLe_SelectType": {
        "doc": "当日x2为本勒：在上三任务中选择“本勒收集”",
        "recognition": "OCR",
        "expected": "本勒收集",
        "roi": [
            324,
            1,
            616,
            653
        ],
        "action": "Click",
        "timeout": 5000,
        "post_wait_freezes": 1000,
        "next": [
            "findmission"
        ],
        "on_error": [
            "SwipetoDownside"
        ]
    },
    "Daily_Exp_SelectType": {
        "doc": "当日x2为经验：在上三任务中选择“经验获取”（固定行为，独立于其他模板设置）",
        "recognition": "OCR",
        "expected": "经验获取",
        "roi": [
            324,
            1,
            616,
            653
        ],
        "action": "Click",
        "timeout": 5000,
        "post_wait_freezes": 1000,
        "next": [
            "findmission"
        ],
        "on_error": [
            "SwipetoDownside"
        ]
    },
    "Daily_SaoLing_SelectType": {
        "doc": "当日x2为骚灵之境：在下三任务中选择“骚灵之境”",
        "recognition": "OCR",
        "expected": "骚灵之境",
        "action": "Click",
        "timeout": 5000,
        "post_wait_freezes": 1500,
        "next": [
            "findmission"
        ],
        "on_error": [
            "returnHome"
        ]
    },
    "findx2_BenLe": {
        "doc": "[模板调度] 在宝库资源总表界面检测本勒收集区域的x2标记，命中则跳转到本勒模板入口",
        "recognition": "TemplateMatch",
        "template": "x2.png",
        "roi": [
            80,
            160,
            320,
            220
        ],
        "action": "Click",
        "post_delay": 500,
        "max_hit": 1,
        "next": [
            "DailyTemplate_BenLeX2"
        ]
    },
    "findx2_Exp": {
        "doc": "[模板调度] 在宝库资源总表界面检测经验获取区域的x2标记，命中则跳转到经验模板入口",
        "recognition": "TemplateMatch",
        "template": "x2.png",
        "roi": [
            480,
            160,
            320,
            220
        ],
        "action": "Click",
        "post_delay": 500,
        "max_hit": 1,
        "next": [
            "DailyTemplate_ExpX2"
        ]
    },
    "findx2_Break": {
        "doc": "[模板调度] 在宝库资源总表界面检测突破材料区域的x2标记，命中则跳转到突破材料模板入口",
        "recognition": "TemplateMatch",
        "template": "x2.png",
        "roi": [
            880,
            160,
            320,
            220
        ],
        "action": "Click",
        "post_delay": 500,
        "max_hit": 1,
        "next": [
            "DailyTemplate_BreakX2"
        ]
    },
    "findx2_Rune": {
        "doc": "[模板调度] 在宝库资源总表界面检测符文之地区域的x2标记，命中则跳转到符文之地模板入口",
        "recognition": "TemplateMatch",
        "template": "x2.png",
        "roi": [
            480,
            380,
            320,
            220
        ],
        "action": "Click",
        "post_delay": 500,
        "max_hit": 1,
        "next": [
            "DailyTemplate_RuneX2"
        ]
    },
    "findx2_SaoLing": {
        "doc": "[模板调度] 在宝库资源总表界面检测骚灵之境区域的x2标记，命中则跳转到骚灵之境模板入口",
        "recognition": "TemplateMatch",
        "template": "x2.png",
        "roi": [
            880,
            380,
            320,
            220
        ],
        "action": "Click",
        "post_delay": 500,
        "max_hit": 1,
        "next": [
            "DailyTemplate_SaoLingX2"
        ]
    },
    "openBattle": {
        "recognition": "OCR",
        "expected": "出击",
        "roi": [
            1021,
            476,
            207,
            244
        ],
        "action": "Click",
        "post_wait_freezes": 1000,
        "next": [
            "openVault",
            "openVaultinOCR"
        ]
    },
    "openVault": {
        "recognition": "TemplateMatch",
        "template": "Vault.png",
        "roi": [
            586,
            558,
            314,
            162
        ],
        "action": "Click",
        "post_wait_freezes": 1500,
        "next": [
            "chooseOwnmission"
        ]
    },
    "openVaultinOCR": {
        "recognition": "OCR",
        "expected": "宝库",
        "roi": [
            586,
            558,
            314,
            162
        ],
        "action": "Click",
        "post_wait_freezes": 1500,
        "next": [
            "chooseOwnmission",
            "SwipetoDownside"
        ]
    },
    "chooseOwnmission": {
        "doc": "上三任务：本勒收集，经验获取，突破材料。找不到则滑动到下三继续找",
        "recognition": "OCR",
        "expected": "经验获取",
        "roi": [
            324,
            1,
            616,
            653
        ],
        "action": "Click",
        "timeout": 5000,
        "post_wait_freezes": 1000,
        "next": [
            "findmission"
        ],
        "on_error": [
            "SwipetoDownside"
        ]
    },
    "SwipetoDownside": {
        "doc": "从上三滑动到下三，查看技能材料、符文之地、骚灵之境",
        "action": "Swipe",
        "begin": [
            1254,
            97,
            1,
            1
        ],
        "end": [
            1240,
            514,
            0,
            1
        ],
        "duration": 500,
        "post_delay": 1000,
        "next": [
            "chooseOwnmission_下三"
        ]
    },
    "chooseOwnmission_下三": {
        "doc": "下三任务：技能材料，符文之地，骚灵之境。找不到则返回主界面",
        "recognition": "OCR",
        "expected": "技能材料",
        "roi": [
            331,
            0,
            581,
            650
        ],
        "action": "Click",
        "timeout": 5000,
        "post_wait_freezes": 1500,
        "next": [
            "findmission"
        ],
        "on_error": [
            "returnHome"
        ]
    },
    "findx2": {
        "recognition": "TemplateMatch",
        "template": "x2.png",
        "action": "Click",
        "post_delay": 3000,
        "max_hit": 1,
        "next": [
            "findmission"
        ]
    },
    "Battle_SwipetoRightside": {
        "doc": "突破材料界面向右滑动",
        "action": "Swipe",
        "begin": [
            1207,
            377,
            1,
            1
        ],
        "end": [
            600,
            378,
            1,
            1
        ],
        "post_delay": 1000,
        "next": [
            "突破材料_findclass_滑动后"
        ]
    },
    "突破材料_findclass": {
        "doc": "突破材料关卡类别选择：传道、君王、仆从、诞生、人子、受难、神子",
        "recognition": "OCR",
        "expected": "传道",
        "action": "Click",
        "timeout": 5000,
        "post_wait_freezes": 1500,
        "next": [
            "findmission"
        ],
        "on_error": [
            "Battle_SwipetoRightside"
        ]
    },
    "突破材料_findclass_滑动后": {
        "doc": "滑动后继续查找突破材料类别，找不到则返回主界面",
        "recognition": "OCR",
        "expected": "传道",
        "action": "Click",
        "timeout": 5000,
        "post_wait_freezes": 1500,
        "next": [
            "findmission"
        ],
        "on_error": [
            "returnHome"
        ]
    },
    "符文之地_findclass": {
        "doc": "符文之地关卡类别选择：西努之盾&漆黑之心、天界光辉&帕尔斯坚毅、战争传奇&努海尔航行、上古之战&萨拉的审判",
        "recognition": "TemplateMatch",
        "template": "battle/上古之战&萨拉的审判.png",
        "threshold": 0.85,
        "action": "Click",
        "timeout": 5000,
        "post_wait_freezes": 1500,
        "next": [
            "findmission"
        ],
        "on_error": [
            "returnHome"
        ]
    },
    "findmission": {
        "doc": "关卡选择界面滑动到最右边",
        "action": "Swipe",
        "begin": [
            1000,
            100,
            1,
            1
        ],
        "end": [
            100,
            100,
            1,
            1
        ],
        "duration": 1000,
        "post_delay": 500,
        "next": [
            "scanmission"
        ]
    },
    "scanmission": {
        "doc": "使用的正则表达式，匹配4个汉字后跟1-7的数字，优先选择数字最大的任务",
        "recognition": "OCR",
        "expected": [
            "[\u4e00-\u9fa5]{4}(7|6(?!.*[\u4e00-\u9fa5]{4}7)|5(?!.*[\u4e00-\u9fa5]{4}[6-7])|4(?!.*[\u4e00-\u9fa5]{4}[5-7])|3(?!.*[\u4e00-\u9fa5]{4}[4-7])|2(?!.*[\u4e00-\u9fa5]{4}[3-7])|1(?!.*[\u4e00-\u9fa5]{4}[2-7]))"
        ],
        "action": "Click",
        "index": -2,
        "post_delay": 500,
        "next": [
            "entermission"
        ]
    },
    "entermission": {
        "recognition": "TemplateMatch",
        "template": "battle/fast battle.png",
        "roi": [
            646,
            606,
            278,
            113
        ],
        "action": "Click",
        "next": [
            "maximization"
        ]
    },
    "maximization": {
        "recognition": "TemplateMatch",
        "template": "maximize.png",
        "roi": [
            1006,
            483,
            265,
            151
        ],
        "action": "Click",
        "next": [
            "launchbattle"
        ]
    },
    "launchbattle": {
        "recognition": "TemplateMatch",
        "template": "battle/launch battle.png",
        "roi": [
            904,
            563,
            297,
            157
        ],
        "action": "Click",
        "post_wait_freezes": 1000,
        "next": [
            "completebattle",
            "cancelforsupply"
        ]
    },
    "cancelforsupply": {
        "recognition": "TemplateMatch",
        "template": "daily/cancel.png",
        "roi": [
            301,
            429,
            287,
            143
        ],
        "action": "Click",
        "post_delay": 500,
        "next": [
            "x2_back"
        ]
    },
    "completebattle": {
        "recognition": "TemplateMatch",
        "template": "battle finish.png",
        "roi": [
            495,
            570,
            290,
            142
        ],
        "action": "Click",
        "post_delay": 500,
        "next": [
            "[JumpBack]Sub_Getreward",
            "[JumpBack]Battle_cancelpage",
            "x2_back"
        ]
    },
    "Battle_cancelpage": {
        "recognition": "TemplateMatch",
        "template": "battle/battle cancel.png",
        "roi": [
            654,
            589,
            276,
            131
        ],
        "action": "Click",
        "target_offset": [
            -300,
            0,
            0,
            0
        ]
    },
    "x2_back": {
        "recognition": "TemplateMatch",
        "template": "back.png",
        "roi": [
            0,
            0,
            215,
            140
        ],
        "action": "Click",
        "post_delay": 3000,
        "next": [
            "returnHome"
        ]
    },
    "returnHome": {
        "recognition": "TemplateMatch",
        "template": "home.png",
        "roi": [
            74,
            0,
            202,
            140
        ],
        "action": "Click",
        "next": [
            "EndonHome"
        ]
    }
}