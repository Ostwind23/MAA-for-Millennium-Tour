{
    "$section_abyss_config": "========== 深渊任务配置节点 ==========",
    "Abyss_BattleModeConfig": {
        "doc": "[配置节点] 深渊战斗模式配置 - 在任务链开始时覆盖 BattleMode_Check 的参数。用户通过 interface.json 选择的战斗模式会通过 pipeline_override 写入此节点的 custom_action_param",
        "recognition": "DirectHit",
        "action": "Custom",
        "custom_action": "BattleModeConfigOverride",
        "custom_action_param": {
            "target_mode": "auto"
        },
        "max_hit": 1
    },
    "Task_Abyss": {
        "doc": "深渊挑战入口。采用JumpBack混合模式：主流程通过next链式执行，入口节点包含关键场景JumpBack用于异常恢复",
        "next": [
            "[JumpBack]Abyss_BattleModeConfig",
            "[JumpBack]Abyss_openBattle",
            "[JumpBack]Sub_Getreward",
            "[JumpBack]Abyss_DifficultyUpgreade",
            "[JumpBack]Victory_Return_noNext",
            "[JumpBack]Abyss_WaitBattleEnd",
            "[JumpBack]BattleMode_Check",
            "[JumpBack]Abyss_LaunchBattle_inTeam",
            "[JumpBack]Abyss_LaunchBattle",
            "[JumpBack]Abyss_ExitReward",
            "[JumpBack]Abyss_GetReward",
            "[JumpBack]enterAbyss",
            "[JumpBack]openAbyss",
            "[JumpBack]Abyss_SecondaryFallback"
        ]
    },
    "Abyss_openBattle": {
        "recognition": "OCR",
        "expected": "出击",
        "roi": [
            1021,
            476,
            207,
            244
        ],
        "action": "Click",
        "post_wait_freezes": 1000,
        "next": [
            "openAbyss"
        ]
    },
    "openAbyss": {
        "recognition": "TemplateMatch",
        "template": "battle/挑战关卡.png",
        "roi": [
            771,
            656,
            256,
            63
        ],
        "action": "Click",
        "next": [
            "enterAbyss"
        ]
    },
    "enterAbyss": {
        "recognition": "OCR",
        "expected": "ABYSS",
        "roi": [
            506,
            136,
            330,
            107
        ],
        "action": "Click",
        "post_delay": 1000,
        "next": [
            "[JumpBack]Sub_Getreward",
            "Abyss_GetReward"
        ]
    },
    "Abyss_GetReward": {
        "recognition": "OCR",
        "expected": "排名奖励",
        "roi": [
            13,
            92,
            170,
            309
        ],
        "action": "Click",
        "post_delay": 1000,
        "next": [
            "[JumpBack]Sub_Getreward",
            "[JumpBack]Abyss_ExitReward",
            "Abyss_LaunchBattle"
        ]
    },
    "Abyss_ExitReward": {
        "recognition": "OCR",
        "expected": "说明",
        "roi": [
            413,
            34,
            453,
            197
        ],
        "action": "Click",
        "target": [
            98,
            223,
            5,
            3
        ]
    },
    "Abyss_DifficultyUpgreade": {
        "doc": "玩家通关当前难度后弹出的难度升级弹窗，点掉即可",
        "recognition": "OCR",
        "expected": "难度",
        "roi": [
            325,
            266,
            614,
            216
        ],
        "action": "Click",
        "target": [
            599,
            646,
            5,
            3
        ]
    },
    "Abyss_LaunchBattle": {
        "doc": "在深渊界面点击开始战斗，随后进入组队界面",
        "recognition": "TemplateMatch",
        "template": "battle/launch battle.png",
        "roi": [
            826,
            575,
            281,
            143
        ],
        "action": "Click",
        "post_wait_freezes": 3000,
        "next": [
            "Abyss_LaunchBattle_inTeam"
        ]
    },
    "Abyss_LaunchBattle_inTeam": {
        "doc": "在组队界面点击开始战斗，进入战斗后触发战斗模式检测",
        "recognition": "TemplateMatch",
        "template": "battle/launch battle.png",
        "roi": [
            1003,
            633,
            251,
            83
        ],
        "action": "Click",
        "post_delay": 5000,
        "next": [
            "[JumpBack]Abyss_BattleModeConfig",
            "[JumpBack]BattleMode_Check",
            "Abyss_WaitBattleEnd",
            "[JumpBack]Victory_Return_noNext",
            "BackToHome"
        ]
    },
    "Abyss_WaitBattleEnd": {
        "doc": "战斗中等待结束 - 通过wait_freeze等待战斗结算（战斗中画面变化大，结算后静止）",
        "recognition": "TemplateMatch",
        "template": [
            "battle/自动战斗状态.png",
            "battle/手动战斗状态.png"
        ],
        "roi": [
            901,
            0,
            378,
            263
        ],
        "post_wait_freezes": {
            "time": 5000
        },
        "rate_limit": 15000,
        "timeout": 300000,
        "next": [
            "[JumpBack]Victory_Return_noNext",
            "BackToHome"
        ]
    },
    "Abyss_SecondaryFallback": {
        "doc": "二级兜底：仅在强条件节点均匹配失败后，才允许触发弱条件返回按钮",
        "recognition": "DirectHit",
        "action": "DoNothing",
        "next": [
            "BackToHome"
        ]
    }
}