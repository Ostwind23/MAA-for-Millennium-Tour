{
    "Task_Store": {
        "doc": "【任务】商店购买。采用 JumpBack 混合模式：主流程通过 next 链式执行，入口节点包含关键场景 JumpBack 用于异常恢复",
        "next": [
            "[JumpBack]Seed_custom",
            "[JumpBack]openStore",
            "[JumpBack]ClosePage",
            "[JumpBack]Sub_Getreward",
            "[JumpBack]Findseed",
            "[JumpBack]buy_Fertilizer_Divisionstore",
            "[JumpBack]open_Seedstore",
            "[JumpBack]confirmPurchase",
            "[JumpBack]maxPurchase",
            "[JumpBack]maxPurchase_Stamina",
            "[JumpBack]buy_Stamina_Divisionstore",
            "[JumpBack]openDailystore",
            "[JumpBack]Sub_buy",
            "[JumpBack]Sub_getGift",
            "[JumpBack]openGiftstore",
            "[JumpBack]Store_SecondaryFallback",
            "EndOnHome"
        ]
    },
    "openStore": {
        "recognition": "TemplateMatch",
        "template": "daily/store.png",
        "roi": [
            869,
            549,
            218,
            171
        ],
        "threshold": 0.55,
        "action": "Click",
        "post_delay": 2000,
        "next": [
            "openGiftstore",
            "openDailystore",
            "[JumpBack]ClosePage",
            "[JumpBack]Sub_Getreward",
            "Homeflag4"
        ]
    },
    "openGiftstore": {
        "recognition": "TemplateMatch",
        "template": "Alert.png",
        "roi": [
            478,
            643,
            206,
            77
        ],
        "action": "Click",
        "target": [
            587,
            688,
            1,
            1
        ],
        "post_delay": 1000,
        "next": [
            "[JumpBack]Sub_getGift",
            "[JumpBack]Sub_Getreward",
            "[JumpBack]openDailystore",
            "Homeflag4"
        ]
    },
    "Sub_getGift": {
        "pre_delay": 500,
        "recognition": "OCR",
        "expected": "免费",
        "roi": [
            180,
            83,
            324,
            344
        ],
        "action": "Click",
        "post_delay": 1000,
        "next": [
            "[JumpBack]Sub_buy",
            "[JumpBack]Sub_Getreward",
            "Subreturn_back"
        ]
    },
    "Sub_buy": {
        "recognition": "OCR",
        "expected": "购买",
        "roi": [
            675,
            448,
            291,
            143
        ],
        "action": "Click",
        "post_delay": 500
    },
    "openDailystore": {
        "recognition": "OCR",
        "expected": "日常商店",
        "roi": [
            880,
            612,
            400,
            107
        ],
        "action": "Click",
        "post_delay": 1000,
        "next": [
            "[JumpBack]buy_Stamina_Divisionstore",
            "[JumpBack]open_Seedstore",
            "Homeflag4",
            "EndOnHome"
        ]
    },
    "buy_Stamina_Divisionstore": {
        "recognition": "OCR",
        "expected": [
            "中型星魂精髓",
            "大型星魂精髓"
        ],
        "roi": [
            222,
            124,
            1058,
            517
        ],
        "action": "Click",
        "post_delay": 500,
        "max_hit": 8,
        "next": [
            "[JumpBack]maxPurchase_Stamina",
            "buy_Stamina_Divisionstore",
            "open_Seedstore",
            "buy_Fertilizer_Divisionstore"
        ]
    },
    "PoorCancle": {
        "doc": "钱不够了",
        "recognition": "TemplateMatch",
        "template": "NotEnoughCoin.png",
        "roi": [
            504,
            0,
            273,
            101
        ],
        "post_wait_freezes": 500,
        "focus": {
            "Node.Recognition.Succeeded": "[color:red]圣殿币不足！[/color]"
        },
        "next": [
            "[JumpBack]Sub_Cancel",
            "Homeflag4"
        ]
    },
    "maxPurchase": {
        "doc": "[复用]点击后购买最大数量逻辑",
        "recognition": "TemplateMatch",
        "template": "maximize.png",
        "roi": [
            708,
            413,
            170,
            150
        ],
        "pre_wait_freezes": 1000,
        "action": "Click",
        "next": [
            "confirmPurchase"
        ]
    },
    "maxPurchase_Stamina": {
        "doc": "点击后购买最大数量逻辑（星魂精髓专用，带售罄检测）",
        "recognition": "TemplateMatch",
        "template": "maximize.png",
        "roi": [
            708,
            413,
            170,
            150
        ],
        "pre_wait_freezes": 1000,
        "action": "Click",
        "next": [
            "confirmPurchase"
        ],
        "on_error": [
            "Check_Stamina_SoldOut"
        ]
    },
    "Check_Stamina_SoldOut": {
        "doc": "检查日常商店星魂精髓是否已售罄，有则跳过体力购买，继续后续购买逻辑",
        "recognition": "TemplateMatch",
        "template": "已售罄.png",
        "roi": "buy_Stamina_Divisionstore",
        "roi_offset": [
            -53,
            -13,
            95,
            216
        ],
        "pre_wait_freezes": 500,
        "action": "DoNothing",
        "next": [
            "open_Seedstore"
        ]
    },
    "maxPurchase_Fertilizer": {
        "doc": "点击后购买最大数量逻辑（肥料专用，带售罄检测）",
        "recognition": "TemplateMatch",
        "template": "maximize.png",
        "roi": [
            708,
            413,
            170,
            150
        ],
        "pre_wait_freezes": 1000,
        "action": "Click",
        "next": [
            "confirmPurchase"
        ],
        "on_error": [
            "Check_Fertilizer_SoldOut"
        ]
    },
    "Check_Fertilizer_SoldOut": {
        "doc": "检查日常商店肥料是否已售罄，有则跳过肥料购买，继续后续逻辑",
        "recognition": "TemplateMatch",
        "template": "已售罄.png",
        "roi": "buy_Fertilizer_Divisionstore",
        "roi_offset": [
            -53,
            -13,
            95,
            216
        ],
        "pre_wait_freezes": 500,
        "action": "DoNothing",
        "next": [
            "Findseed"
        ]
    },
    "maxPurchase_Seed": {
        "doc": "点击后购买最大数量逻辑（种子专用，带售罄检测）",
        "recognition": "TemplateMatch",
        "template": "maximize.png",
        "roi": [
            708,
            413,
            170,
            150
        ],
        "pre_wait_freezes": 1000,
        "action": "Click",
        "next": [
            "confirmPurchase"
        ],
        "on_error": [
            "Check_Seed_SoldOut"
        ]
    },
    "Check_Seed_SoldOut": {
        "doc": "检查日常商店种子是否已售罄，有则尝试切页寻找其它种子",
        "recognition": "TemplateMatch",
        "template": "已售罄.png",
        "roi": "Findseed",
        "roi_offset": [
            -53,
            -13,
            95,
            216
        ],
        "pre_wait_freezes": 500,
        "action": "DoNothing",
        "next": [
            "Swipetootherside1"
        ]
    },
    "confirmPurchase": {
        "recognition": "TemplateMatch",
        "template": "daily/confirmPurchase.png",
        "roi": [
            736,
            505,
            290,
            142
        ],
        "action": "Click",
        "post_wait_freezes": 1000,
        "on_error": [
            "PoorCancle"
        ],
        "next": [
            "confirmPurchaseCheck",
            "[JumpBack]Sub_Getreward",
            "Subreturn_back"
        ]
    },
    "confirmPurchaseCheck": {
        "doc": "确认购买后若弹窗仍停留则取消（判定货币不足/购买失败）",
        "recognition": "TemplateMatch",
        "template": "daily/confirmPurchase.png",
        "roi": [
            736,
            505,
            290,
            142
        ],
        "action": "DoNothing",
        "post_delay": 500,
        "next": [
            "[JumpBack]Sub_Cancel",
            "Subreturn_back"
        ]
    },
    "open_Seedstore": {
        "recognition": "OCR",
        "expected": "种子",
        "roi": [
            26,
            115,
            202,
            424
        ],
        "action": "Click",
        "post_delay": 1000,
        "next": [
            "[JumpBack]Seed_custom",
            "[JumpBack]buy_Fertilizer_Divisionstore",
            "Homeflag4",
            "EndOnHome"
        ]
    },
    "buy_Fertilizer_Divisionstore": {
        "doc": "购买三种肥料",
        "recognition": "OCR",
        "expected": [
            "肥料"
        ],
        "roi": [
            222,
            124,
            1058,
            517
        ],
        "action": "Click",
        "next": [
            "[JumpBack]maxPurchase_Fertilizer",
            "Findseed",
            "buy_Fertilizer_Divisionstore",
            "Homeflag4"
        ]
    },
    "Findseed": {
        "recognition": "TemplateMatch",
        "template": [],
        "roi": [
            494,
            135,
            623,
            548
        ],
        "action": "Click",
        "next": [
            "[JumpBack]maxPurchase_Seed",
            "Findseed",
            "Swipetootherside1",
            "Homeflag4"
        ]
    },
    "Swipetootherside1": {
        "recognition": "DirectHit",
        "max_hit": 1,
        "action": "Swipe",
        "begin": [
            1207,
            377,
            1,
            1
        ],
        "end": [
            600,
            378,
            1,
            1
        ],
        "next": [
            "Findseed",
            "Swipetootherside2",
            "Homeflag4"
        ]
    },
    "Swipetootherside2": {
        "recognition": "DirectHit",
        "max_hit": 1,
        "action": "Swipe",
        "begin": [
            1200,
            377,
            1,
            1
        ],
        "end": [
            607,
            377,
            1,
            1
        ],
        "next": [
            "Findseed",
            "Homeflag4"
        ]
    },
    "Homeflag4": {
        "doc": "商店任务结束，返回主界面",
        "recognition": "TemplateMatch",
        "template": "home.png",
        "roi": [
            74,
            0,
            202,
            140
        ],
        "action": "Click",
        "post_delay": 1000
    },
    "Store_SecondaryFallback": {
        "doc": "二级兜底：仅在强条件节点均匹配失败后，才允许触发弱条件返回按钮",
        "recognition": "DirectHit",
        "action": "DoNothing",
        "next": [
            "Homeflag4"
        ]
    },
    "Seed_Mark": {
        "doc": "种子选择标志节点，存储用户在 interface 中的选择",
        "recognition": "DirectHit",
        "action": "DoNothing",
        "enabled": false,
        "attach": {
            "龙鳞果": false,
            "青海莓": false,
            "千蝶菇": false,
            "黄金葡萄": false,
            "连叶卷心菜": false,
            "拇指玉米": false,
            "月牙马铃薯": false,
            "火焰大番茄": false,
            "黑松露": false,
            "龟甲菇": false,
            "天谕橙": false,
            "绿翠绒": false
        }
    },
    "Seed_custom": {
        "doc": "执行自定义动作，读取 Seed_Mark 的 attach 并覆写 Findseed 的 template",
        "recognition": "DirectHit",
        "max_hit": 1,
        "action": "Custom",
        "custom_action": "InitSeedSelection",
        "custom_action_param": {
            "flag_node": "Seed_Mark",
            "target_node": "Findseed"
        }
    }
}